using System;

namespace PersonalRecords
{
    internal class Program
    {
        static void Main(string[] args)
        {
            string[] recordsDossier = new string[0];
            string[] recordsPost = new string[0];
            string[] commands = { "1 - Добавить досье", "2 - Вывести все досье", "3 - Удалить досье", "4 - Поиск по фамилии", "5 - Выход" };

            bool isRun = true;

            int direction = 0;

            while (isRun)
            {
                Console.Clear();

                AccentItem(commands, null,out direction);
  
                string menuItem = Convert.ToString(direction + 1);              

                switch (menuItem)
                {
                    case "1":
                        Console.Clear();

                        Console.WriteLine("Введите ФИО");
                        recordsDossier = AddDossier(recordsDossier);
                        Console.WriteLine("Введите должность");
                        recordsPost = AddDossier(recordsPost);

                        Console.WriteLine("Досье добавлено");

                        Console.ReadKey();
                        Console.Clear();
                        break;

                    case "2":
                        Console.Clear();

                        OutputDossiers(recordsDossier, recordsPost);
                        
                        break;

                    case "3":
                        Console.Clear();

                        DeleteDossier(ref recordsDossier, ref recordsPost);
                        
                        break;

                    case "4":
                        Console.Clear();

                        Console.WriteLine("Введите фамилию для поиска");

                        FindDossier(recordsDossier, recordsPost);
                        break;

                    case "5":
                        Console.Clear();

                        isRun = false;
                        continue;
                }

                if (recordsDossier.Length == 0)
                {
                    Console.Clear();   

                    Console.WriteLine("Список пуст");
                }
            }   
        }

        static void AccentItem (string[] items1, string[] items2,out int direction)
        {
            direction = 0;

            ConsoleKeyInfo pressedKey = new ConsoleKeyInfo();
           
            while (pressedKey.Key != ConsoleKey.Enter)
            {
                for (int i = 0; i < items1.Length; i++)
                {
                    if (items1.Length == direction)
                    {
                        direction = 0;
                    }
                    else if (direction == -1)
                    {
                        direction = items1.Length - 1;
                    }

                    if (i == direction)
                    {
                        ConsoleColor defultColor = Console.ForegroundColor;
                        ConsoleColor defultColor2 = Console.BackgroundColor;
                        Console.BackgroundColor = ConsoleColor.Gray;
                        Console.ForegroundColor = ConsoleColor.Red;

                        if (items2 == null)
                        {
                            Console.WriteLine(items1[i]);
                        }
                        else
                        {
                            Console.WriteLine($"{i + 1}. {items1[i]}  -  {items2[i]} ");
                        }
                        
                        Console.BackgroundColor = defultColor2;
                        Console.ForegroundColor = defultColor;
                    }
                    else
                    {
                        if (items2 == null)
                        {
                            Console.WriteLine(items1[i]);
                        }
                        else
                        {
                            Console.WriteLine($"{i + 1}. {items1[i]}  -  {items2[i]} ");

                        }

                    }
                }

                pressedKey = Console.ReadKey();

                if (pressedKey.Key == ConsoleKey.DownArrow)
                {
                    direction += 1;
                    Console.Clear();
                }
                else if (pressedKey.Key == ConsoleKey.UpArrow)
                {
                    direction -= 1;
                    Console.Clear();
                }

            }
        }

        static string[] AddDossier(string[] records)
        {
            string[] utilityRecords = new string [records.Length + 1];

            for (int i = 0; i < records.Length; i++)
            {
                utilityRecords[i] = records[i];
            }

            utilityRecords[utilityRecords.Length - 1] = Console.ReadLine();
            records = utilityRecords;

            return records;
        }

        static void OutputDossiers(string[] recordsDossier, string[] recordsPost)
        {
            for (int i = 0; i < recordsDossier.Length; i++)
            {
                Console.WriteLine($"{i + 1}. {recordsDossier[i]}  -  {recordsPost[i]} ");
            }

            Console.WriteLine("\n");

            Console.ReadKey();
            Console.Clear();
        }

        static void DeleteDossier(ref string[] recordsDossier, ref string[] recordsPost )
        {
            int direction = 0;

            AccentItem(recordsDossier, recordsPost, out direction);

            int numberDossier = direction;

            string[] utilityRecordsDossier = new string[recordsDossier.Length - 1];
            string[] utilityRecordsPost = new string[recordsPost.Length - 1];

            for (int i = 0, j = 0; i < recordsDossier.Length; i++)
            {
                if (i == numberDossier)
                    continue;

                utilityRecordsDossier[j] = recordsDossier[i];
                utilityRecordsPost[j] = recordsPost[i];
                j++;
            }

            Console.SetCursorPosition((recordsDossier[direction].Length + recordsPost[direction].Length + 10),recordsDossier.Length - 1);
            Console.Write(" < удалено");

            recordsDossier = utilityRecordsDossier;
            recordsPost = utilityRecordsPost;

            Console.ReadKey();
            Console.Clear();
        }

        static void FindDossier(string[] recordsDossier, string[] recordsPost)
        {
            string surnameFind = Console.ReadLine();

            for (int i = 0; i < recordsDossier.Length; i++)
            {
                if (recordsDossier[i].ToLower().StartsWith(surnameFind.ToLower()))
                    Console.WriteLine($"{recordsDossier[i]} - {recordsPost[i]}");
            }
            Console.ReadKey();
        }
    }
}
